jenkins:
  systemMessage: "Configured by Jenkins Configuration as Code for golang"
  securityRealm:
    local:
      allowsSignup: true
      users:
        - id: "admin"
          password: "admin"
  authorizationStrategy:
    loggedInUsersCanDoAnything:
      allowAnonymousRead: true
  tools:
    go:
      installations:
        - name: "Go"
          home: "/usr/local/go"
  plugins:
    required:
      - job-dsl
      - configuration-as-code
      - git
      - workflow-aggregator
      - go
  jobs:
    - script: >
        pipelineJob('Run Groovy Script') {
          definition {
            cps {
              script('''
                pipeline {
                  agent any
                  stages {
                    stage('Run Groovy Script') {
                      steps {
                        script {
                          def groovyScript = new File('/var/lib/jenkins/jenkins-setup.groovy')
                          evaluate(groovyScript)
                        }
                      }
                    }
                  }
                }
              '''.stripIndent())
              sandbox()
            }
          }
        }
  seedJobs:
    - name: "Run Groovy Script"
      scriptPath: "seed.groovy"
